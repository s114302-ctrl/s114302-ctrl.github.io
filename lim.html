<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>å¾®ç©åˆ†æ±ºé¬¥</title>
    <style>
        body { background: #222; color: #fff; font-family: sans-serif; text-align: center; }
        .screen { display: none; padding: 20px; }
        #setup-screen { display: block; } /* é è¨­é¡¯ç¤ºè¨­å®šç•«é¢ */
        
        .duel-container { display: flex; justify-content: space-around; }
        .player-box { border: 2px solid #555; padding: 20px; width: 45%; background: #333; }
        
        .math-display { 
            background: #000; border-radius: 10px; padding: 20px; 
            margin: 20px 0; min-height: 100px; font-size: 1.2rem; line-height: 1.5;
        }
        
        button { 
            padding: 15px 25px; cursor: pointer; font-size: 1rem; 
            margin: 5px; border-radius: 5px; border: none;
        }
        .start-btn { background: #f1c40f; font-weight: bold; }
        .yes-btn { background: #27ae60; color: white; }
        .no-btn { background: #c0392b; color: white; }
        .score-board { font-size: 2rem; color: #f1c40f; }
    </style>
</head>
<body>

    <div id="setup-screen" class="screen">
        <h1>ğŸ“ å¾®ç©åˆ†æ¥µé™/é€£çºŒæŒ‘æˆ° âš¡</h1>
        <p>è«‹é¸æ“‡éŠæˆ²æ¨¡å¼ï¼š</p>
        <button class="start-btn" onclick="uiStartGame('limit')">æ¥µé™æ¨¡å¼ (å­˜åœ¨?)</button>
        <button class="start-btn" onclick="uiStartGame('cont')">é€£çºŒæ¨¡å¼ (é€£çºŒ?)</button>
    </div>

    <div id="game-screen" class="screen">
        <h2 id="mode-title">æ¨¡å¼</h2>
        <div class="duel-container">
            <div class="player-box">
                <h3>ç©å®¶ 1</h3>
                <div class="score-board" id="s1">0</div>
                <div class="math-display" id="q1">è¼‰å…¥ä¸­...</div>
                <button class="yes-btn" onclick="uiCheckAns(1, true)">YES</button>
                <button class="no-btn" onclick="uiCheckAns(1, false)">NO</button>
            </div>
            <div class="player-box">
                <h3>ç©å®¶ 2</h3>
                <div class="score-board" id="s2">0</div>
                <div class="math-display" id="q2">è¼‰å…¥ä¸­...</div>
                <button class="yes-btn" onclick="uiCheckAns(2, true)">YES</button>
                <button class="no-btn" onclick="uiCheckAns(2, false)">NO</button>
            </div>
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        var gameState = {
            mode: '',
            scores: [0, 0],
            ans: [null, null]
        };

        // é–‹å§‹éŠæˆ²
        function uiStartGame(mode) {
            console.log("Game Starting: " + mode);
            gameState.mode = mode;
            gameState.scores = [0, 0];
            
            document.getElementById('mode-title').innerText = (mode === 'limit' ? "æ¨¡å¼ï¼šæ¥µé™æ˜¯å¦å­˜åœ¨ï¼Ÿ" : "æ¨¡å¼ï¼šå‡½æ•¸æ˜¯å¦é€£çºŒï¼Ÿ");
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            refreshQ(1);
            refreshQ(2);
        }

        // ç”¢ç”Ÿé¡Œç›®
        function generateQ() {
            var c = Math.floor(Math.random() * 3) + 1;
            var isTrue = Math.random() > 0.5;
            var a = Math.floor(Math.random() * 3) + 2;
            
            if (gameState.mode === 'limit') {
                var b = Math.floor(Math.random() * 5);
                var d = isTrue ? a : a + 1;
                var e = isTrue ? b : b + 2;
                return {
                    txt: "f(x) = { " + a + "x + " + b + ", x < " + c + "<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { " + d + "x + " + e + ", x > " + c + "<br>å•: lim<sub>xâ†’" + c + "</sub> f(x) å­˜åœ¨?",
                    ans: isTrue
                };
            } else {
                var valAtC = isTrue ? (a * c) : (a * c + 2);
                return {
                    txt: "f(x) = { " + a + "x, x â‰  " + c + "<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { " + valAtC + ", x = " + c + "<br>å•: f(x) åœ¨ x = "
