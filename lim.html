<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>å¾®ç©åˆ†æ±ºé¬¥ï¼šæ¥µé™èˆ‡é€£çºŒ</title>
    <style>
        :root { --p1-color: #4a90e2; --p2-color: #e94e77; }
        body { background: #1a1a1a; color: white; font-family: sans-serif; margin: 0; text-align: center; }
        .setup { padding: 50px; }
        .game-container { display: none; grid-template-columns: 1fr 1fr; height: 100vh; }
        .player-zone { padding: 20px; border: 2px solid #333; position: relative; }
        #p1 { border-color: var(--p1-color); }
        #p2 { border-color: var(--p2-color); }
        .math-box { background: #333; padding: 20px; border-radius: 10px; min-height: 150px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-bottom: 20px; }
        .btn-group { display: flex; gap: 10px; justify-content: center; }
        button { padding: 15px 30px; font-size: 1.2rem; cursor: pointer; border: none; border-radius: 5px; transition: 0.2s; }
        .btn-yes { background: #27ae60; color: white; }
        .btn-no { background: #c0392b; color: white; }
        .score { font-size: 2rem; font-weight: bold; }
        .feedback { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); font-size: 1.2rem; }
    </style>
</head>
<body>

<div id="setup-screen" class="setup">
    <h1>ğŸ“ å¾®ç©åˆ†æ±ºé¬¥å ´ âš¡</h1>
    <p>é¸æ“‡éŠæˆ²æ¨¡å¼ï¼š</p>
    <button onclick="startGame('limit')">æ¥µé™æ¨¡å¼</button>
    <button onclick="startGame('cont')">é€£çºŒæ¨¡å¼</button>
</div>

<div id="game-screen" class="game-container">
    <div id="p1" class="player-zone">
        <h2 style="color: var(--p1-color)">ç©å®¶ 1</h2>
        <div class="score" id="score1">0 / 5</div>
        <div class="math-box" id="ques1">è¼‰å…¥ä¸­...</div>
        <div class="btn-group">
            <button class="btn-yes" onclick="checkAnswer(1, true)">å­˜åœ¨ / é€£çºŒ</button>
            <button class="btn-no" onclick="checkAnswer(1, false)">ä¸å­˜åœ¨ / ä¸é€£çºŒ</button>
        </div>
        <div id="feed1" class="feedback"></div>
    </div>

    <div id="p2" class="player-zone">
        <h2 style="color: var(--p2-color)">ç©å®¶ 2</h2>
        <div class="score" id="score2">0 / 5</div>
        <div class="math-box" id="ques2">è¼‰å…¥ä¸­...</div>
        <div class="btn-group">
            <button class="btn-yes" onclick="checkAnswer(2, true)">å­˜åœ¨ / é€£çºŒ</button>
            <button class="btn-no" onclick="checkAnswer(2, false)">ä¸å­˜åœ¨ / ä¸é€£çºŒ</button>
        </div>
        <div id="feed2" class="feedback"></div>
    </div>
</div>

<script>
    let currentMode = '';
    let scores = [0, 0];
    let answers = [null, null];

    function startGame(mode) {
        currentMode = mode;
        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'grid';
        nextQuestion(1);
        nextQuestion(2);
    }

    function generateMath() {
        const c = Math.floor(Math.random() * 5); // éŠœæ¥é»
        const isTrue = Math.random() > 0.5;

        if (currentMode === 'limit') {
            // æ¥µé™é¡Œç›®ï¼šf(x) = ax + b (x<c), dx + e (x>c)
            const a = Math.floor(Math.random() * 5) + 1;
            const b = Math.floor(Math.random() * 5);
            let d, e;
            if (isTrue) {
                d = a; e = b; // å·¦å³ç›¸ç­‰
            } else {
                d = a + 1; e = b + 1; // å·¦å³ä¸ç­‰
            }
            return {
                text: `f(x) = { ${a}x+${b}, x<${c} ; ${d}x+${e}, x>${c} } <br> å•: lim <sub>xâ†’${c}</sub> f(x) æ˜¯å¦å­˜åœ¨?`,
                ans: isTrue
            };
        } else {
            // é€£çºŒé¡Œç›®ï¼šéœ€åˆ¤æ–·æ¥µé™å­˜åœ¨ä¸”ç­‰æ–¼ f(c)
            const a = Math.floor(Math.random() * 3) + 1;
            const valAtC = isTrue ? a*c : a*c + 1;
            return {
                text: `f(x) = { ${a}x, xâ‰ ${c} ; ${valAtC}, x=${c} } <br> å•: f(x) åœ¨ x=${c} æ˜¯å¦é€£çºŒ?`,
                ans: isTrue
            };
        }
    }

    function nextQuestion(pNum) {
